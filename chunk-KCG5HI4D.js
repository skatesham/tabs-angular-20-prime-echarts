import{d as P,e as I}from"./chunk-RJXBAD5B.js";import{d as z}from"./chunk-RPLYESSM.js";import{f as F}from"./chunk-AGTP7EU7.js";import{$ as C,Cb as y,Db as c,Eb as v,Fb as f,Ka as _,Kb as q,Lb as E,W as b,Wb as N,Ya as g,Za as h,Zb as O,aa as D,ab as w,bb as S,cb as A,db as l,eb as s,ia as p,mb as k,ob as M,pb as d,ya as r}from"./chunk-CCD7Q5EY.js";var Q=(a,e)=>e.id;function j(a,e){a&1&&c(0," Ritual dispon\xEDvel para celebrar: ")}function R(a,e){if(a&1&&(l(0,"span",15),c(1),s()),a&2){let t=d(2).$implicit,i=d(2);r(),f(" ",i.getPendingDays(t.id),"d ")}}function V(a,e){if(a&1&&(l(0,"div",13)(1,"span",14),c(2," \u{1F31F} "),s(),g(3,R,2,1,"span",15),s()),a&2){let t=d().$implicit,i=d(2);r(3),h(i.shouldShowPendingBadge(t.id)?3:-1)}}function $(a,e){if(a&1){let t=k();l(0,"p-card",7),M("click",function(){let n=C(t).$implicit,o=d(2);return D(o.onActivityClick(n.id))}),l(1,"div",2)(2,"span",8),c(3),s(),l(4,"div",9)(5,"p",10),g(6,j,1,0),s(),l(7,"h3"),c(8),s(),l(9,"div",11)(10,"span",12),c(11),s()()(),g(12,V,4,1,"div",13),s()()}if(a&2){let t=e.$implicit,i=d(2);y(E("shadow-md border-2 ",t.borderColor," ",t.bgColor," cursor-pointer hover:opacity-80 transition-opacity")),r(3),v(t.icon),r(2),A("ngClass",i.isCompleted(t.id)?"text-gray-500 dark:text-gray-400":"text-yellow-600 dark:text-yellow-400 font-semibold"),r(),h(i.isCompleted(t.id)?-1:6),r(),y(q("text-base font-semibold ",t.color)),r(),v(t.name),r(3),v(t.frequency),r(),h(i.isCompleted(t.id)?-1:12)}}function Y(a,e){if(a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),c(4,"\u{1F4AA}"),s(),l(5,"p",4),c(6),s()()(),l(7,"div",5),w(8,$,13,13,"p-card",6,Q),s()()),a&2){let t=d();r(6),f(" ",t.zenMessage," "),r(2),S(t.visibleActivities)}}var T=class a{router=b(z);now=p(new Date);showAll=O(!1);activities=[{id:"daily",name:"Resson\xE2ncia Interna",frequency:"di\xE1rio",hz:"528 Hz",icon:"\u{1F9D8}",color:"text-cyan-700 dark:text-cyan-300",bgColor:"bg-cyan-50 dark:bg-cyan-950/30",borderColor:"border-cyan-200 dark:border-cyan-800"},{id:"weekly",name:"Portal da Prosperidade",frequency:"semanal",hz:"639 Hz",icon:"\u{1F300}",color:"text-blue-700 dark:text-blue-300",bgColor:"bg-blue-50 dark:bg-blue-950/30",borderColor:"border-blue-200 dark:border-blue-800"},{id:"monthly",name:"Ciclo da Abund\xE2ncia",frequency:"mensal",hz:"741 Hz",icon:"\u{1F30A}",color:"text-indigo-700 dark:text-indigo-300",bgColor:"bg-indigo-50 dark:bg-indigo-950/30",borderColor:"border-indigo-200 dark:border-indigo-800"}];completedActivities=p(this.loadCompletedActivities());monthlyFocus=p(null);monthlyGoal=p(null);constructor(){this.loadMonthlyData(),setInterval(()=>this.now.set(new Date),6e4),N(()=>{this.now(),this.checkAndResetActivities()})}loadMonthlyData(){let e=localStorage.getItem("quantum-activities");if(e)try{let t=JSON.parse(e);t.monthly&&typeof t.monthly=="object"&&(this.monthlyFocus.set(t.monthly.focus||null),this.monthlyGoal.set(t.monthly.goal||null))}catch{}}get visibleActivities(){let e=this.showAll()?this.activities:this.activities.filter(t=>!this.isCompleted(t.id));return this.showAll()||(e=[...e].reverse()),e.forEach(t=>{let i=localStorage.getItem("quantum-activities-pending");(!i||!JSON.parse(i)[t.id])&&this.initializePendingDate(t.id)}),e}loadCompletedActivities(){let e=localStorage.getItem("quantum-activities");if(!e)return new Set;try{let t=JSON.parse(e);return new Set(Object.keys(t).filter(i=>{let n=t[i],o=typeof n=="object"?n.timestamp:n;return this.isStillValid(i,o)}))}catch{return new Set}}isStillValid(e,t){let i=new Date(t),n=this.now();switch(e){case"daily":return this.isSameDay(i,n);case"weekly":return this.isSameWeek(i,n);case"monthly":return this.isSameMonth(i,n);default:return!1}}isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}isSameWeek(e,t){let n=u=>{let x=u.getDay(),J=u.getDate()-x+(x===0?-6:1);return new Date(u.setDate(J))},o=Math.floor(n(new Date(e)).getTime()/864e5),m=Math.floor(n(new Date(t)).getTime()/864e5);return o===m}isSameMonth(e,t){return e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}checkAndResetActivities(){let e=localStorage.getItem("quantum-activities");if(e)try{let t=JSON.parse(e),i={},n=!1;Object.keys(t).forEach(o=>{let m=t[o],u=typeof m=="object"?m.timestamp:m;this.isStillValid(o,u)?i[o]=t[o]:n=!0}),n&&(localStorage.setItem("quantum-activities",JSON.stringify(i)),this.completedActivities.set(new Set(Object.keys(i))))}catch{}}isCompleted(e){return this.completedActivities().has(e)}getPendingDays(e){let t=localStorage.getItem("quantum-activities-pending");if(!t)return this.initializePendingDate(e),0;try{let n=JSON.parse(t)[e];if(!n)return this.initializePendingDate(e),0;let o=Math.floor((this.now().getTime()-n)/(1e3*60*60*24));return Math.max(0,o)}catch{return 0}}shouldShowPendingBadge(e){return this.isCompleted(e)?!1:this.getPendingDays(e)>0}initializePendingDate(e){let t=localStorage.getItem("quantum-activities-pending"),i=t?JSON.parse(t):{};i[e]||(i[e]=Date.now()),localStorage.setItem("quantum-activities-pending",JSON.stringify(i))}mockPendingDays(){let e={daily:Date.now()-2592e5,weekly:Date.now()-6048e5,monthly:Date.now()-1296e6};localStorage.setItem("quantum-activities-pending",JSON.stringify(e))}get hasOpenActivities(){return this.visibleActivities.length>0}get zenMessage(){let e=["O caminho se revela a cada passo","A pr\xE1tica di\xE1ria cultiva a paz interior","Pequenas a\xE7\xF5es criam grandes transforma\xE7\xF5es","O presente \xE9 o \xFAnico momento de poder","Cada respira\xE7\xE3o \xE9 uma nova oportunidade"],t=new Date().getDay();return e[t%e.length]}onActivityClick(e){e==="daily"?this.router.navigate(["/tabs/ritual-daily"]):e==="weekly"?this.router.navigate(["/tabs/ritual-weekly"]):e==="monthly"&&this.router.navigate(["/tabs/ritual-monthly"])}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=_({type:a,selectors:[["p-quantum-activities"]],inputs:{showAll:[1,"showAll"]},decls:1,vars:1,consts:[[1,"mb-6"],[1,"mb-4","px-4","py-3","bg-gradient-to-r","from-purple-50","to-blue-50","dark:from-purple-950/20","dark:to-blue-950/20","rounded-lg","border-l-4","border-purple-400","dark:border-purple-600"],[1,"flex","items-center","gap-3"],[1,"text-2xl"],[1,"text-sm","italic","text-gray-700","dark:text-gray-300"],[1,"grid","gap-4","md:grid-cols-3"],[3,"class"],[3,"click"],[1,"text-3xl"],[1,"flex-1"],[1,"text-[10px]","mb-0.5",3,"ngClass"],[1,"flex","items-center","gap-2"],[1,"text-xs","text-gray-600","dark:text-gray-400"],[1,"flex","flex-col","items-center","gap-1"],["title","Cada a\xE7\xE3o consciente eleva sua frequ\xEAncia \u2728",1,"text-3xl","opacity-60","hover:opacity-100","transition-opacity","animate-pulse-slow"],[1,"text-[9px]","font-bold","text-white","bg-gradient-to-r","from-purple-600","to-pink-600","px-2","py-0.5","rounded-full","shadow-md"]],template:function(t,i){t&1&&g(0,Y,10,1,"div",0),t&2&&h(i.hasOpenActivities?0:-1)},dependencies:[I,P,F],encapsulation:2,changeDetection:0})};export{T as a};
